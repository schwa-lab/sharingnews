{% extends "layout.html" %}
{% block content %}
<nav>{% for crumb in breadcrumbs %}<a href="{% if crumb %}{% url 'collection' sig=crumb %}{% else %}{% url 'collection' %}{% endif %}">{% if crumb %}{{crumb}}{% else %}All domains{% endif %}</a> &gt; {% endfor %}</nav>
<h1>{% if params.sig %}{{params.sig}}{% else %}All domains{% endif %}
{% if params.period %}in {{params.period}}{% endif %}
{% if params.start and params.end %}in {{params.start}} to {{params.end}}{% elif params.start %}since {{params.start}}{% elif params.end %}until {{params.end}}{% endif %}
</h1>

<dl>
    <dt>Total</dt><dd>{{articles.count}}</dd>
    <dt>Fetched</dt><dd>{{fetched.count}}</dd>
    <dt>Successful fetch</dt><dd>{{fetched_success.count}}</dd>
    <dt>{% if not subdivisions %}<a href="{% url 'extractor' field='headline' sig=params.sig %}">{% endif %}Extractor development{% if not subdivisions %}</a>{% endif %}</dt><dd>{{dev_sample.count}}</dd>
</dl>

<h2>Total shares summary</h2>
<table>
    <thead><tr><th>Bin freq</th><th>Min</th><th>Max</th><th>Avg</th><th>Example</th></tr></thead>
    <tbody>
    {% for bin in share_bins %}
    <tr><td>{{bin.count}}</td><td>{{bin.min}}</td><td>{{bin.max}}</td><td>{{bin.avg|floatformat:1}}</td><td>{% include '_article_link.html' with article=bin.example only %}</td></tr>
    {% endfor %}
    </tbody>
</table>

{% if subdivisions %}
<h2>Subdivision</h2>
<table>
	<thead><tr><th>Frequency</th><th>Cumulative</th></tr></thead>
    <tbody>
    {% for sig, count, percent in subdivisions %}
	<tr><td>{{count}}</td><td>{{percent|floatformat:1}}%</td><td><a href="{% url 'collection' sig=sig start=params.start|default:'' end=params.end|default:'' %}">{{sig}}</a></td></tr>
    {% endfor %}
    </tbody>
</table>
{% endif %}

{% endblock %}
